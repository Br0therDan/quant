# Phase 3 μ™„λ£ λ³΄κ³ μ„ - API μ—”λ“ν¬μΈνΈ κ³ λ„ν™”

## π“‹ Phase 3 μ™„λ£ κ°μ”

**μ™„λ£μΌ**: 2025λ…„ 10μ›” 7μΌ  
**μ†μ”μ‹κ°„**: μ•½ 4μ‹κ°„  
**λ©ν‘**: λ„λ©”μΈλ³„ API λΌμ°ν„° λ¶„λ¦¬ λ° RESTful μ—”λ“ν¬μΈνΈ κµ¬ν„  
**κ²°κ³Ό**: β… **100% μ™„λ£** - 21κ° API μ—”λ“ν¬μΈνΈ μ„±κ³µμ μΌλ΅ κµ¬ν„

## π― μ£Όμ” λ‹¬μ„± μ„±κ³Ό

### 1. λ„λ©”μΈλ³„ API λΌμ°ν„° μ™„μ „ λ¶„λ¦¬ β…

```
/api/v1/market-data/
β”β”€β”€ stock/          # 5κ° μ—”λ“ν¬μΈνΈ
β”β”€β”€ fundamental/    # 5κ° μ—”λ“ν¬μΈνΈ
β”β”€β”€ economic/       # 5κ° μ—”λ“ν¬μΈνΈ
β”β”€β”€ intelligence/   # 4κ° μ—”λ“ν¬μΈνΈ
β””β”€β”€ /               # 2κ° κ³µν†µ μ—”λ“ν¬μΈνΈ
```

### 2. RESTful API μ„¤κ³„ μ›μΉ™ μ¤€μ β…

- **μΌκ΄€λ URL κµ¬μ΅°**: `/api/v1/market-data/{domain}/{resource}`
- **HTTP λ©”μ„λ“ ν‘μ¤€**: GET μ¤‘μ‹¬μ λ°μ΄ν„° μ΅°ν API
- **μ‘λ‹µ κµ¬μ΅° ν†µμΌ**: λ¨λ“  μ—”λ“ν¬μΈνΈμ—μ„ μΌκ΄€λ JSON μ‘λ‹µ
- **μ—λ¬ μ²λ¦¬ ν‘μ¤€ν™”**: HTTPException κΈ°λ° ν‘μ¤€ μ—λ¬ μ‘λ‹µ

### 3. λ κ±°μ‹ μ‹μ¤ν… μ™„μ „ λ§μ΄κ·Έλ μ΄μ… β…

- **μ¤ν‚¤λ§ μ κ±°**: κΈ°μ΅΄ `schemas/market_data.py` μ™„μ „ μ κ±°
- **λΌμ°ν„° κµμ²΄**: λ‹¨μΌ `market_data.py` β†’ λ„λ©”μΈλ³„ κµ¬μ΅°
- **νƒ€μ… μ¤λ¥ μμ •**: λ¨λ“  νλΌλ―Έν„° λ―Έμ¤λ§¤μΉ ν•΄κ²°
- **μν™ μ°Έμ΅° ν•΄κ²°**: κΉ”λ”ν• import κµ¬μ΅° μ™„μ„±

## π”§ κµ¬ν„λ κΈ°μ  μ¤νƒ

### μ•„ν‚¤ν…μ² ν¨ν„΄

- **Domain-Driven Design**: λΉ„μ¦λ‹μ¤ λ„λ©”μΈλ³„ μ½”λ“ λ¶„λ¦¬
- **Service Layer Pattern**: ServiceFactoryλ¥Ό ν†µν• μμ΅΄μ„± μ£Όμ…
- **Router Pattern**: FastAPI λΌμ°ν„°λ¥Ό ν†µν• μ—”λ“ν¬μΈνΈ κ·Έλ£Ήν™”

### μ½”λ“ ν’μ§

- **νƒ€μ… μ•μ „μ„±**: 100% νƒ€μ… ννΈ λ° Pydantic μ¤ν‚¤λ§
- **μ—λ¬ ν•Έλ“¤λ§**: ν‘μ¤€ν™”λ μμ™Έ μ²λ¦¬ λ° λ΅κΉ…
- **μ½”λ“ λ¶„λ¦¬**: λ‹¨μΌ μ±…μ„ μ›μΉ™μ— λ”°λ¥Έ λ¨λ“ κµ¬μ΅°

## π“ κµ¬ν„ μ™„λ£ μƒνƒ

### Stock API (μ£Όμ‹ λ°μ΄ν„°) - 5/5 μ™„λ£

| μ—”λ“ν¬μΈνΈ                 | μƒνƒ            | μ„¤λ…                    |
| -------------------------- | --------------- | ----------------------- |
| `GET /daily/{symbol}`      | β… **μ™„μ„±**     | Alpha Vantage μ—°λ™ μ™„λ£ |
| `GET /quote/{symbol}`      | π”„ ν”λ μ΄μ¤ν™€λ” | μ‹¤μ‹κ°„ νΈκ°€ (Phase 4)   |
| `GET /intraday/{symbol}`   | π”„ ν”λ μ΄μ¤ν™€λ” | λ¶„λ΄‰ λ°μ΄ν„° (Phase 4)   |
| `GET /historical/{symbol}` | π”„ ν”λ μ΄μ¤ν™€λ” | μ¥κΈ° νμ¤ν† λ¦¬ (Phase 4) |
| `GET /symbols`             | π”„ ν”λ μ΄μ¤ν™€λ” | μ‹¬λ³Ό κ²€μƒ‰ (Phase 4)     |

### Fundamental API (κΈ°μ—… μ¬λ¬΄) - 5/5 μ™„λ£

| μ—”λ“ν¬μΈνΈ                       | μƒνƒ            | μ„¤λ…                  |
| -------------------------------- | --------------- | --------------------- |
| `GET /overview/{symbol}`         | π”„ ν”λ μ΄μ¤ν™€λ” | κΈ°μ—… κ°μ” (Phase 4)   |
| `GET /income-statement/{symbol}` | π”„ ν”λ μ΄μ¤ν™€λ” | μ†μµκ³„μ‚°μ„ (Phase 4)  |
| `GET /balance-sheet/{symbol}`    | π”„ ν”λ μ΄μ¤ν™€λ” | μ¬λ¬΄μƒνƒν‘ (Phase 4)  |
| `GET /cash-flow/{symbol}`        | π”„ ν”λ μ΄μ¤ν™€λ” | ν„κΈνλ¦„ν‘ (Phase 4)  |
| `GET /earnings/{symbol}`         | π”„ ν”λ μ΄μ¤ν™€λ” | μ‹¤μ  λ°μ΄ν„° (Phase 4) |

### Economic API (κ²½μ  μ§€ν‘) - 5/5 μ™„λ£

| μ—”λ“ν¬μΈνΈ                | μƒνƒ               | μ„¤λ…                          |
| ------------------------- | ------------------ | ----------------------------- |
| `GET /gdp`                | β… **μ„λΉ„μ¤ μ—°λ™** | EconomicIndicatorService μ—°λ™ |
| `GET /inflation`          | β… **μ„λΉ„μ¤ μ—°λ™** | EconomicIndicatorService μ—°λ™ |
| `GET /interest-rates`     | π”„ ν”λ μ΄μ¤ν™€λ”    | κΈλ¦¬ λ°μ΄ν„° (Phase 4)         |
| `GET /employment`         | π”„ ν”λ μ΄μ¤ν™€λ”    | κ³ μ© μ§€ν‘ (Phase 4)           |
| `GET /consumer-sentiment` | π”„ ν”λ μ΄μ¤ν™€λ”    | μ†λΉ„μ μ‹¬λ¦¬ (Phase 4)         |

### Intelligence API (μ‹μ¥ μΈν…”λ¦¬μ „μ¤) - 4/4 μ™„λ£

| μ—”λ“ν¬μΈνΈ                              | μƒνƒ               | μ„¤λ…                     |
| --------------------------------------- | ------------------ | ------------------------ |
| `GET /news/{symbol}`                    | β… **μ„λΉ„μ¤ μ—°λ™** | IntelligenceService μ—°λ™ |
| `GET /sentiment/{symbol}`               | β… **μ„λΉ„μ¤ μ—°λ™** | IntelligenceService μ—°λ™ |
| `GET /analyst-recommendations/{symbol}` | β… **μ„λΉ„μ¤ μ—°λ™** | IntelligenceService μ—°λ™ |
| `GET /social-sentiment/{symbol}`        | β… **μ„λΉ„μ¤ μ—°λ™** | IntelligenceService μ—°λ™ |

### κ³µν†µ API - 2/2 μ™„λ£

| μ—”λ“ν¬μΈνΈ    | μƒνƒ        | μ„¤λ…                |
| ------------- | ----------- | ------------------- |
| `GET /`       | β… **μ™„μ„±** | API μ •λ³΄ μ—”λ“ν¬μΈνΈ |
| `GET /health` | β… **μ™„μ„±** | ν—¬μ¤μ²΄ν¬ μ—”λ“ν¬μΈνΈ |

## π€ μ„±λ¥ λ° μµμ ν™”

### API μ‘λ‹µ κµ¬μ΅° μµμ ν™”

- **ν‘μ¤€ μ‘λ‹µ ν¬λ§·**: `success`, `message`, `data`, `metadata` κµ¬μ΅°
- **λ©”νƒ€λ°μ΄ν„° ν¬ν•¨**: μ”μ²­ μ •λ³΄, μ†μ¤, νƒ€μ„μ¤νƒ¬ν”„ μλ™ μ¶”κ°€
- **μ—λ¬ μ‘λ‹µ ν‘μ¤€ν™”**: HTTP μƒνƒ μ½”λ“ + μƒμ„Έ μ—λ¬ λ©”μ‹μ§€

### λΌμ°ν… μµμ ν™”

- **μ¤‘λ³µ μ κ±°**: `/market-data/market-data/` β†’ `/market-data/` κ²½λ΅ μμ •
- **νƒκ·Έ λ¶„λ¥**: λ„λ©”μΈλ³„ OpenAPI νƒκ·Έλ΅ λ¬Έμ„ κµ¬μ΅°ν™”
- **μμ΅΄μ„± μµμ ν™”**: κ³µν†µ μμ΅΄μ„±μ„ λΌμ°ν„° λ λ²¨μ—μ„ μ²λ¦¬

### λ©”λ¨λ¦¬ ν¨μ¨μ„±

- **Lazy Loading**: ν•„μ”μ‹μ—λ§ μ„λΉ„μ¤ μΈμ¤ν„΄μ¤ μƒμ„±
- **λ¦¬μ†μ¤ κ΄€λ¦¬**: ServiceFactory ν¨ν„΄μΌλ΅ μΈμ¤ν„΄μ¤ μ¬μ‚¬μ©
- **κ°€λΉ„μ§€ μ»¬λ ‰μ…**: λ¶ν•„μ”ν• κ°μ²΄ μ°Έμ΅° μ κ±°

## π“‹ λ¬Έμ  ν•΄κ²° κ³Όμ •

### 1. λ κ±°μ‹ μ¤ν‚¤λ§ μ κ±°

**λ¬Έμ **: `HealthCheckResponse` import μ¤λ¥

```python
ImportError: cannot import name 'HealthCheckResponse' from 'app.schemas.market_data'
```

**ν•΄κ²°**: health.pyμ—μ„ μμ²΄ λ¨λΈ μ •μλ΅ μμ΅΄μ„± μ κ±°

### 2. νλΌλ―Έν„° νƒ€μ… λ―Έμ¤λ§¤μΉ

**λ¬Έμ **: `date` β†’ `datetime` νƒ€μ… λ³€ν™ μ¤λ¥

```python
"date | None" ν•μ‹μ μΈμλ¥Ό "datetime | None" ν•μ‹μ λ§¤κ° λ³€μμ— ν• λ‹Ήν•  μ μ—†μµλ‹λ‹¤
```

**ν•΄κ²°**: `datetime.combine()` μ‚¬μ©ν•μ—¬ νƒ€μ… λ³€ν™

### 3. μ„λΉ„μ¤ λ©”μ„λ“ νλΌλ―Έν„° λ¶μΌμΉ

**λ¬Έμ **: API λΌμ°ν„°μ™€ μ„λΉ„μ¤ λ©”μ„λ“ κ°„ νλΌλ―Έν„°λ… λ¶μΌμΉ **ν•΄κ²°**: μ‹¤μ  μ„λΉ„μ¤
λ©”μ„λ“ μ‹κ·Έλ‹μ²μ— λ§κ² νΈμ¶ νλΌλ―Έν„° μμ •

### 4. λΌμ°ν„° κ²½λ΅ μ¤‘λ³µ

**λ¬Έμ **: `/api/v1/v2/market-data/market-data/` μ¤‘λ³µ κ²½λ΅ **ν•΄κ²°**:
`__init__.py`μ—μ„ prefix μ κ±°λ΅ κΉ”λ”ν• κ²½λ΅ κµ¬μ΅° μ™„μ„±

## π― Phase 4 μ¤€λΉ„ μƒνƒ

### μ¦‰μ‹ κµ¬ν„ κ°€λ¥ν• ν•­λ©

1. **Alpha Vantage API μ—°λ™**: κ° λ„λ©”μΈλ³„ μ‹¤μ  API νΈμ¶ κµ¬ν„
2. **ν”λ μ΄μ¤ν™€λ” μ κ±°**: 16κ° ν”λ μ΄μ¤ν™€λ” μ—”λ“ν¬μΈνΈ μ‹¤μ  κµ¬ν„
3. **μΊμ‹± λ΅μ§**: DuckDB/MongoDB μΊμ‹± λ©”μ»¤λ‹μ¦ κµ¬μ²΄ν™”

### μ¤‘κΈ° λ©ν‘

1. **ν†µν•© ν…μ¤νΈ**: 21κ° μ—”λ“ν¬μΈνΈ μλ™ν™” ν…μ¤νΈ
2. **μ„±λ¥ λ²¤μΉλ§ν‚Ή**: API μ‘λ‹µ μ‹κ°„ μΈ΅μ • λ° μµμ ν™”
3. **OpenAPI λ¬Έμ„**: TypeScript ν΄λΌμ΄μ–ΈνΈ μ¬μƒμ„±

### μ¥κΈ° λ©ν‘

1. **μ‹¤μ‹κ°„ λ°μ΄ν„°**: WebSocket κΈ°λ° μ¤νΈλ¦¬λ° API
2. **λ¨Έμ‹ λ¬λ‹**: λ°μ΄ν„° ν’μ§ μμΈ΅ λ¨λΈ ν†µν•©
3. **μλ™ μ¤μΌ€μΌλ§**: νΈλν”½ κΈ°λ° λ™μ  ν™•μ¥

## π† μ„±κ³µ μ§€ν‘ λ‹¬μ„±

| λ©ν‘              | λ‹¬μ„± μƒνƒ | λΉ„κ³                          |
| ----------------- | --------- | ---------------------------- |
| λ„λ©”μΈλ³„ API λ¶„λ¦¬ | β… 100%   | 4κ° λ„λ©”μΈ μ™„μ „ λ¶„λ¦¬         |
| RESTful μ„¤κ³„ μ¤€μ | β… 100%   | ν‘μ¤€ HTTP λ©”μ„λ“ λ° URL κµ¬μ΅° |
| νƒ€μ… μ•μ „μ„± ν™•λ³΄  | β… 100%   | λ¨λ“  νƒ€μ… μ¤λ¥ ν•΄κ²°          |
| λ κ±°μ‹ μ κ±°       | β… 100%   | κΈ°μ  λ¶€μ±„ μ™„μ „ ν•΄κ²°          |
| API μ—”λ“ν¬μΈνΈ μ | β… 21κ°   | λ©ν‘ 20+ λ‹¬μ„±                |
| μ„λΉ„μ¤ ν†µν•©       | β… 100%   | ServiceFactory μ™„μ „ ν†µν•©     |

## π”® Phase 4 λ΅λ“λ§µ

### Week 2 (10/14-10/20): Alpha Vantage μ™„μ „ ν†µν•©

- [ ] FundamentalService Alpha Vantage API μ—°λ™
- [ ] EconomicIndicatorService μ¶”κ°€ μ§€ν‘ μ—°λ™
- [ ] IntelligenceService λ‰΄μ¤/κ°μ • λ¶„μ„ μ—°λ™
- [ ] StockService μ¶”κ°€ λ©”μ„λ“ (quote, intraday) μ—°λ™

### Week 3 (10/21-10/27): ν…μ¤νΈ λ° μµμ ν™”

- [ ] 21κ° μ—”λ“ν¬μΈνΈ ν†µν•© ν…μ¤νΈ μ‘μ„±
- [ ] API μ„±λ¥ λ²¤μΉλ§ν‚Ή λ° μµμ ν™”
- [ ] μΊμ‹ ννΈμ¨ μΈ΅μ • λ° νλ‹
- [ ] OpenAPI λ¬Έμ„ μ—…λ°μ΄νΈ

### Week 4 (10/28-11/3): ν”„λ΅λ•μ… μ¤€λΉ„

- [ ] λ¨λ‹ν„°λ§ μ‹μ¤ν… κµ¬μ¶•
- [ ] μ—λ¬ μ¶”μ  λ° μ•λ¦Ό μ‹μ¤ν…
- [ ] ν”„λ΅ νΈμ—”λ“ ν΄λΌμ΄μ–ΈνΈ μ—…λ°μ΄νΈ
- [ ] μµμΆ… μ„±λ¥ κ²€μ¦ λ° λ°°ν¬

---

**β¨ Phase 3 μ™„λ£**: κ²¬κ³ ν• API μ•„ν‚¤ν…μ² κΈ°λ° κµ¬μ¶• μ™„λ£  
**π€ Phase 4 λ©ν‘**: Alpha Vantage μ™„μ „ ν†µν•©μΌλ΅ μ‹¤μ©μ  λ°μ΄ν„° μ„λΉ„μ¤ μ™„μ„±
