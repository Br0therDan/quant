# 3단계 계획 – 생성형 인사이트 및 ChatOps

## 1. 개요

- **목표:** 백테스트 분석을 임원용 내러티브로 전환하고, 대화형 전략 생성과
  플랫폼 진단용 ChatOps 지원을 제공하는 생성형 AI 서비스를 운영화한다.
- **비즈니스 가치:** 수동 분석 시간을 줄이고 전략 도구 접근성을 확대하며, AI
  지원 워크플로우로 운영 대응 속도를 개선한다.
- **기간:** 6주 (2025-03-31 → 2025-05-09).

## 2. 범위 및 산출물

| ID  | 산출물                 | 설명                                                                                  | 승인 기준                                                                                                                                                                                                                                   |
| --- | ---------------------- | ------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| D1  | 내러티브 리포트 서비스 | BacktestResult ID에 연결된 구조화 요약을 생성하는 LLM 기반 `ReportGenerationService`. | - 캐싱이 적용된 `/backtests/{id}/report` 라우트<br>- 마스터 플랜 4.1절의 KPI·레짐·시그널 메타데이터를 포함한 프롬프트 구성【F:docs/backend/ai_integration/master_plan.md†L133-L159】<br>- Pydantic 검증과 사실 확인                         |
| D2  | 대화형 전략 빌더       | 사용자 의도를 StrategyService 템플릿에 매핑하는 자연어 인터페이스.                    | - 마스터 플랜 4.2절 기준을 충족하는 `/strategies/generative-builder` API가 검증된 설정을 반환【F:docs/backend/ai_integration/master_plan.md†L160-L187】<br>- 사용 가능한 지표를 포괄하는 임베딩 인덱스<br>- 휴먼 인 더 루프 승인 워크플로우 |
| D3  | 운영 ChatOps 에이전트  | 캐시, 파이프라인, 서비스 상태 진단을 제공하는 툴 기반 LLM.                            | - 마스터 플랜 4.3절에 따라 툴 사용을 허용하는 Slack/FastAPI 엔드포인트 제공【F:docs/backend/ai_integration/master_plan.md†L188-L207】<br>- RBAC 적용 및 감사 로그<br>- 런북 통합                                                            |

### 범위 제외

- 생성된 전략의 자동 프로덕션 배포(수동 승인이 계속 필요).
- 비텍스트 미디어 생성.

## 3. 작업 스트림 및 백로그 매핑

| 작업 스트림         | 백로그 항목 | 비고                                                                                                                                                                                                                               |
| ------------------- | ----------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 내러티브 인텔리전스 | D1          | BacktestService의 KPI 출력과 1단계 레짐 메타데이터를 수집하고 Strategy & Backtest 데이터 스키마와 정렬 유지.【F:docs/backend/ai_integration/master_plan.md†L133-L159】【F:docs/backend/strategy_backtest/ARCHITECTURE.md†L1-L108】 |
| 대화형 UX           | D2          | 마스터 플랜 4.2절을 참조하여 Strategy 템플릿 기반 프롬프트 라이브러리와 임베딩 구축.【F:docs/backend/ai_integration/master_plan.md†L160-L187】                                                                                     |
| ChatOps 구현        | D3          | MarketDataService와 DatabaseManager 상태 점검을 위한 진단 툴을 등록.【F:docs/backend/ai_integration/master_plan.md†L188-L207】                                                                                                     |
| 거버넌스 및 안전성  | D1, D2, D3  | 플랫폼 거버넌스(5절)의 프롬프트 버전 관리와 독성 검사를 적용.【F:docs/backend/ai_integration/master_plan.md†L208-L232】                                                                                                            |

## 4. 마일스톤

| 마일스톤                            | 날짜       | 담당        | 종료 기준                                                     |
| ----------------------------------- | ---------- | ----------- | ------------------------------------------------------------- |
| M1: 프롬프트·템플릿 라이브러리 완성 | 2025-04-11 | 프로덕트/UX | 거버넌스 통제가 적용된 프롬프트 카탈로그 승인                 |
| M2: 내러티브 MVP 리뷰               | 2025-04-18 | 백엔드      | 상위 5개 백테스트에 대해 검증된 출력을 제공하는 리포트 서비스 |
| M3: 대화형 빌더 베타                | 2025-04-25 | 프로덕트    | 전략 빌더가 검증 실패율 5% 미만으로 구성안 생성               |
| M4: ChatOps 파일럿 론칭             | 2025-05-02 | 데브옵스    | 상위 10개 운영 질문을 감사 로그와 함께 응답하는 챗 에이전트   |
| M5: 단계 쇼케이스                   | 2025-05-09 | 프로덕트    | 내러티브·빌더·ChatOps 기능을 결합한 경영진 데모               |

## 5. 의존성과 인터페이스

- **1·2단계 산출물:** 프롬프트 강화를 위한 KPI 지표, 레짐, 이상 경보 접근 필요.
- **LLM 공급자:** 함수 호출 기능이 있는 OpenAI/Azure 또는 온프레미스 모델.
- **인증 및 RBAC:** 기존 사용자 관리와 통합하여 툴 실행을 제한.
- **모니터링 스택:** LLM 상호작용을 포착하기 위한 로깅 및 가시성 파이프라인.

## 6. 위험 및 대응

| 위험                                 | 영향 | 가능성 | 대응                                                                                                                    |
| ------------------------------------ | ---- | ------ | ----------------------------------------------------------------------------------------------------------------------- |
| 임원용 보고서에서 LLM 환각           | 높음 | 중간   | 출력과 KPI 데이터스토어를 비교하는 사실 검증기 도입, 리뷰어 승인 큐 제공.                                               |
| 프롬프트 드리프트 또는 거버넌스 미비 | 중간 | 중간   | Git에서 프롬프트 버전 관리, 5절 가이드에 따른 정책 점검 강제.【F:docs/backend/ai_integration/master_plan.md†L208-L232】 |
| ChatOps를 통한 민감 작업 노출        | 높음 | 낮음   | RBAC 게이트, 감사 로그, 샌드박스된 툴 실행 적용.                                                                        |

## 7. 지표 및 보고

- **내러티브 품질:** 리뷰어 만족도, 사실 정확도, 처리 시간.
- **빌더 채택:** 생성된 전략 수, 승인 전환율, 평균 수정 횟수.
- **ChatOps 사용량:** 일간 활성 사용자, 평균 해결 시간, 회피된 에스컬레이션 수.

## 8. 리소스 계획

| 역할              | 투입량   | 비고                      |
| ----------------- | -------- | ------------------------- |
| 백엔드 엔지니어   | 1 FTE    | API 통합, 캐싱, RBAC 훅   |
| 프롬프트 엔지니어 | 0.5 FTE  | 프롬프트 및 가드레일 설계 |
| 프로덕트 디자이너 | 0.5 FTE  | 대화형 UX 플로우          |
| 데브옵스 엔지니어 | 0.5 FTE  | ChatOps 배포 및 모니터링  |
| 컴플라이언스 리드 | 0.25 FTE | 정책 검토 및 감사 정렬    |

## 9. 커뮤니케이션 주기

- 내러티브 결과물을 위한 프로덕트·컴플라이언스 주간 콘텐츠 리뷰.
- 데브옵스 리더십과 격주 ChatOps 데모.

## 10. 종료 기준

- 생성형 서비스를 롤백 플랜과 함께 스테이징에 배포.
- 프롬프트 버전과 승인 로그가 포함된 거버넌스 문서 업데이트.
- 운영 플레이북에 ChatOps 에스컬레이션 경로 반영.
