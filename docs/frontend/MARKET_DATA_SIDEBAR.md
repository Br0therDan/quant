# 마켓 데이터 사이드바 구현 완료

## 📋 개요

TradingView 스타일의 우측 사이드바를 마켓 데이터 레이아웃에 추가했습니다.

## ✨ 주요 기능

### 1. **워치리스트 섹션** (상단)

- ✅ 여러 워치리스트 표시 및 확장/축소
- ✅ 실시간 심볼 가격 및 변동률 표시
- ✅ 심볼 클릭 시 해당 페이지로 이동
- ✅ 워치리스트 생성/편집 기능
- ✅ 현재 선택된 심볼 하이라이트

### 2. **심볼 개요 섹션** (하단)

- ✅ 현재 심볼의 실시간 가격 정보
- ✅ 회사 정보 및 주요 지표
  - 시가총액
  - 거래량
  - P/E Ratio
  - 52주 최고/최저
  - 배당수익률
  - EPS
- ✅ 회사 설명 (최대 4줄 표시)

### 3. **워치리스트 편집 다이얼로그**

- ✅ 워치리스트 생성/편집
- ✅ 심볼 검색 (Autocomplete)
- ✅ 심볼 추가/제거
- ✅ 설명 입력

## 🏗️ 파일 구조

### 새로 생성된 컴포넌트

```
frontend/src/components/market-data/
├── MarketDataSidebar.tsx          # 통합 사이드바 (워치리스트 + 심볼 개요)
└── WatchlistEditDialog.tsx        # 워치리스트 편집 다이얼로그
```

### 백업된 기존 컴포넌트

```
frontend/src/components/
├── watchlists/
│   ├── CreateWatchlistDialog-old.tsx
│   └── WatchlistCard-old.tsx
└── market-data/
    └── WatchlistBar-old.tsx
```

### 수정된 파일

```
frontend/src/app/(main)/market-data/[symbol]/
├── layout.tsx                     # 우측 사이드바 통합
└── chart/page.tsx                 # WatchlistBar 제거
```

## 🎨 레이아웃 구조

```
┌─────────────────────────────────────────────────────────┐
│                   탭 네비게이션                          │
│         [개요] [차트] [재무제표] [뉴스 & 분석]          │
├─────────────────────────────────┬──────────────────────┤
│                                 │  ┌────────────────┐  │
│                                 │  │  워치리스트    │  │
│                                 │  │  ┌──────────┐  │  │
│         메인 콘텐츠              │  │  │ 기술주   │  │  │
│      (Overview/Chart/           │  │  ├──────────┤  │  │
│       Financials/News)          │  │  │ AAPL     │  │  │
│                                 │  │  │ MSFT     │  │  │
│                                 │  │  │ GOOGL    │  │  │
│                                 │  │  └──────────┘  │  │
│                                 │  ├────────────────┤  │
│                                 │  │   심볼 개요    │  │
│                                 │  │  AAPL          │  │
│                                 │  │  $175.44       │  │
│                                 │  │  +10.03 (+5%)  │  │
│                                 │  │  ─────────     │  │
│                                 │  │  시가총액: 2.9T│  │
│                                 │  │  P/E: 28.5     │  │
│                                 │  │  ...           │  │
│                                 │  └────────────────┘  │
└─────────────────────────────────┴──────────────────────┘
```

## 🔧 사용 방법

### 워치리스트 생성

1. 사이드바 상단의 "+" 버튼 클릭
2. 워치리스트 이름 입력
3. 심볼 검색 및 추가
4. "생성" 버튼 클릭

### 워치리스트 편집

1. 워치리스트 이름 옆의 편집 아이콘 클릭
2. 심볼 추가/제거
3. "업데이트" 버튼 클릭

### 심볼 전환

- 워치리스트에서 심볼 클릭 시 해당 심볼 페이지로 자동 이동

## 📱 반응형 디자인

- **데스크톱 (lg 이상)**: 사이드바 항상 표시 (320px 고정 너비)
- **태블릿/모바일 (lg 미만)**: 사이드바 숨김 (공간 확보)

## 🧹 정리 작업

백업된 파일들을 제거하려면:

```bash
./scripts/cleanup-old-components.sh
```

## 🎯 주요 개선사항

1. **통합 사이드바**: 기존에 분산되어 있던 워치리스트와 심볼 정보를 하나로 통합
2. **실시간 데이터**: 워치리스트 심볼의 실시간 가격 및 변동률 표시
3. **직관적인 UI**: TradingView와 유사한 레이아웃으로 사용자 경험 향상
4. **편리한 편집**: 다이얼로그를 통한 간편한 워치리스트 관리
5. **타입 안전성**: TypeScript 타입 정의 완벽 지원

## 🔍 기술 스택

- **React 19** + **Next.js 14** (App Router)
- **Material-UI v6** (최신 Grid API)
- **TanStack Query v5** (데이터 페칭 및 캐싱)
- **TypeScript** (타입 안전성)

## 📝 API 통합

### 사용된 Hook

- `useWatchlist()`: 워치리스트 목록 조회
- `useWatchlistDetail()`: 특정 워치리스트 상세 정보
- `useStockQuote()`: 실시간 주가 정보
- `useFundamentalCompanyOverview()`: 회사 개요 및 재무 지표
- `useStockSearchSymbols()`: 심볼 검색

### 데이터 흐름

```
Backend API (FastAPI)
    ↓
TanStack Query (캐싱)
    ↓
React Hooks
    ↓
UI Components
```

## 🚀 다음 단계

- [ ] 워치리스트 드래그 앤 드롭으로 순서 변경
- [ ] 워치리스트 공유 기능
- [ ] 알림 설정 (가격 알림)
- [ ] 포트폴리오 추적 기능
- [ ] 모바일에서 사이드바 토글 버튼 추가

## 👨‍💻 작성자

GitHub Copilot + Developer

---

**작업 완료일**: 2025년 10월 12일
